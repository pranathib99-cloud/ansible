- name: functions      #functions are used to manipulate data types
  hosts: localhost
  connection: local
  become: yes
  vars:
   #ipaddress: "223.444.555.879.022"
   gmail: "B.PRANATHI41@GMAIL.COM" 
   name: " sai pranathi B"     #converting uppercase to lowercase using default filter
   technology: " ansible , docker , kubernets"  # string variable
   #dictionary = map
   tags:
    application: payment
    enviroment: dev
    # 
   listtags:
   - key: application
     value: payment
   - key: enviroment
     value: dev 

  tasks: 
  - name: default variable
    ansible.builtin.debug:
     msg: "hello my dear {{ name | default('pranathi')}}"

   # srings to list conversion
  - name: convert string to list 
    ansible.builtin.debug:
     msg: "technology list is: {{ technology | split(',')}}"

  - name: convert dictionary to list #dectionary to map conversion
    ansible.builtin.debug:
     msg: "tag are: {{tags | dict2items}}"

  - name: conver list to mapping
    ansible.builtin.debug:
     msg: "list to mapping : {{ listtags | items2dict}}" 


     #convertiong a yaml file to json
  - name: read yaml and take it into variable
    ansible.builtin.set_fact:
      student_yaml: "{{ lookup('file', 'student.yaml') | from_yaml }}"

  - name: convert yaml into json
    ansible.builtin.debug:
      msg: "json: {{ student_yaml | to_json  }}"

  - name: save json to file
    ansible.builtin.copy:
      dest: ./stundent-data.json
      content: "{{ student_yaml | to_nice_json  }}"

  - name: convert uppercase
    ansible.builtin.debug:
     msg: " {{ name | upper }} "

  - name: covert lower case
    ansible.builtin.debug:
     msg: " {{gmail | lower }} "
  
     #- name: validate ipv4 address valid are not 
    #ansible.builtin.debug:  "{{ ipaddress | ansible.utils.ipv4 }}"


  - name: command grep for root 
    ansible.builtin.shell: cat /etc/passwd | grep root
    register: coomand_output

  - name: print command_output
    ansible.builtin.debug:
     msg: "command output is : {{ coomand_output }} "
     